#N canvas 0 39 450 300 10;
#X obj 137 72 inlet~;
#X obj 134 483 earplug~ 270 -25;
#X floatatom 339 178 5 0 0 0 - - -;
#X obj 339 220 line 0 1;
#X obj 339 197 pack 0 50;
#X floatatom 340 268 5 0 0 0 - - -;
#X obj 340 310 line 0 1;
#X obj 340 287 pack 0 50;
#X obj 133 615 dac~ 1 2;
#X text 36 481 filtered --->;
#X text 373 175 <--- azimuth: 0 - 360 (degrees);
#X text 373 267 <--- elevation: -40 - 90 (degrees);
#X obj 342 158 hsl 128 15 0 360 0 0 empty empty empty -2 -8 0 10 -262130
-1 -1 0 1;
#X obj 343 250 hsl 128 15 -40 90 0 1 empty empty empty -2 -8 0 10 -262130
-1 -1 4000 0;
#X obj 153 553 *~;
#X obj 230 551 *~;
#X floatatom 595 394 10 0 0 0 - - -;
#N canvas 130 126 450 300 dtl 0;
#X floatatom 45 195 5 0 0 0 - - -;
#X text 87 188 d(t) \, distance between sound source (ax+tbx \, ay+tby)
and observer (lx \, ly) at time t;
#X floatatom 353 34 5 0 0 0 - - ax;
#X obj 47 227 outlet;
#X text 119 97 ay;
#X text 42 97 ax;
#X floatatom 64 101 5 0 0 0 - - -;
#X floatatom 141 100 5 0 0 0 - - -;
#X floatatom 209 99 5 0 0 0 - - -;
#X floatatom 290 97 5 0 0 0 - - -;
#X obj 63 -5 inlet;
#X text 184 96 lxl;
#X text 266 97 lyl;
#X obj 46 155 expr sqrt(pow(($f1-$f5) \, 2)+pow(($f2-$f6) \, 2));
#X obj 64 27 unpack \$1 \$2 \$3 \$4 \$5 \$6;
#X connect 0 0 3 0;
#X connect 6 0 13 0;
#X connect 7 0 13 1;
#X connect 8 0 13 4;
#X connect 9 0 13 5;
#X connect 10 0 14 0;
#X connect 13 0 0 0;
#X connect 14 0 6 0;
#X connect 14 1 7 0;
#X connect 14 4 8 0;
#X connect 14 5 9 0;
#X restore 595 370 pd dtl;
#N canvas 714 63 450 300 delayl 0;
#X obj 93 41 inlet;
#X floatatom 94 71 5 0 0 0 - - -;
#X obj 94 103 expr $f1/343;
#X floatatom 94 131 5 0 0 0 - - -;
#X obj 92 206 outlet;
#X floatatom 92 179 5 0 0 0 - - -;
#X obj 94 155 * 1000;
#X text 149 130 delay in seconds;
#X text 143 182 delay in milliseconds;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X restore 594 419 pd delayl;
#X floatatom 593 451 5 0 0 0 - - -;
#X obj 582 503 line~;
#X obj 587 477 pack 0 100;
#N canvas 615 142 747 304 volume 0;
#X obj 149 101 *~;
#X floatatom 192 93 5 0 0 0 - - -;
#X floatatom 203 173 5 0 0 0 - - -;
#X obj 198 144 env~ 128;
#X floatatom 263 27 5 0 0 0 - distancel -;
#X floatatom 262 106 5 0 0 0 - - -;
#X obj 288 145 +;
#X floatatom 292 172 5 0 0 0 - - -;
#X floatatom 313 89 5 0 0 0 - ctrl -;
#X obj 195 56 expr 1/$f1;
#X obj 111 -20 inlet~;
#X obj 129 178 outlet~;
#X text 240 173 control;
#X floatatom 67 60 5 0 0 0 - - ctrl;
#X obj 62 31 env~ 128;
#X obj 331 113 +;
#X floatatom 363 110 5 0 0 0 - - -;
#X floatatom 329 135 5 0 0 0 - - -;
#X msg 424 88 11;
#X obj 448 54 loadbang;
#X obj 269 62 expr -8.6561702*log($f1)-11;
#X connect 0 0 3 0;
#X connect 0 0 11 0;
#X connect 1 0 0 1;
#X connect 3 0 2 0;
#X connect 4 0 9 0;
#X connect 4 0 20 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 8 0 15 0;
#X connect 9 0 1 0;
#X connect 10 0 0 0;
#X connect 10 0 14 0;
#X connect 14 0 13 0;
#X connect 15 0 17 0;
#X connect 16 0 15 1;
#X connect 17 0 6 1;
#X connect 18 0 16 0;
#X connect 19 0 18 0;
#X connect 20 0 5 0;
#X restore 602 593 pd volume l;
#X floatatom 536 419 5 0 0 0 - - distancel;
#X floatatom 544 467 5 0 0 0 - - delayl1;
#X obj 137 119 delwrite~ loop1 5000;
#X obj 513 543 vd~ loop1 1;
#X obj 717 327 netreceive 50070;
#X obj 365 561 vsl 15 128 0 127 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 295 620 / 40;
#N canvas 0 29 683 697 carAngle 1;
#X obj 147 82 inlet~;
#X obj 144 493 earplug~ 270 -25;
#X floatatom 349 188 5 0 0 0 - - -;
#X obj 349 230 line 0 1;
#X obj 349 207 pack 0 50;
#X floatatom 350 278 5 0 0 0 - - -;
#X obj 350 320 line 0 1;
#X obj 350 297 pack 0 50;
#X obj 143 625 dac~ 1 2;
#X text 46 491 filtered --->;
#X text 383 185 <--- azimuth: 0 - 360 (degrees);
#X text 383 277 <--- elevation: -40 - 90 (degrees);
#X obj 352 168 hsl 128 15 0 360 0 0 empty empty empty -2 -8 0 10 -262130
-1 -1 0 1;
#X obj 353 260 hsl 128 15 -40 90 0 1 empty empty empty -2 -8 0 10 -262130
-1 -1 4000 0;
#X obj 163 563 *~;
#X obj 240 561 *~;
#X floatatom 605 404 10 0 0 0 - - -;
#N canvas 130 126 450 300 dtl 1;
#X floatatom 45 195 5 0 0 0 - - -;
#X text 87 188 d(t) \, distance between sound source (ax+tbx \, ay+tby)
and observer (lx \, ly) at time t;
#X floatatom 353 34 5 0 0 0 - - ax;
#X obj 47 227 outlet;
#X text 119 97 ay;
#X text 42 97 ax;
#X floatatom 64 101 5 0 0 0 - - -;
#X floatatom 141 100 5 0 0 0 - - -;
#X floatatom 209 99 5 0 0 0 - - -;
#X floatatom 290 97 5 0 0 0 - - -;
#X obj 63 -5 inlet;
#X text 184 96 lxl;
#X text 266 97 lyl;
#X obj 46 155 expr sqrt(pow(($f1-$f5) \, 2)+pow(($f2-$f6) \, 2));
#X obj 64 27 unpack \$1 \$2 \$3 \$4 \$5 \$6;
#X connect 0 0 3 0;
#X connect 6 0 13 0;
#X connect 7 0 13 1;
#X connect 8 0 13 4;
#X connect 9 0 13 5;
#X connect 10 0 14 0;
#X connect 13 0 0 0;
#X connect 14 0 6 0;
#X connect 14 1 7 0;
#X connect 14 4 8 0;
#X connect 14 5 9 0;
#X restore 605 380 pd dtl;
#N canvas 714 63 450 300 delayl 0;
#X obj 93 41 inlet;
#X floatatom 94 71 5 0 0 0 - - -;
#X obj 94 103 expr $f1/343;
#X floatatom 94 131 5 0 0 0 - - -;
#X obj 92 206 outlet;
#X floatatom 92 179 5 0 0 0 - - -;
#X obj 94 155 * 1000;
#X text 149 130 delay in seconds;
#X text 143 182 delay in milliseconds;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X restore 604 429 pd delayl;
#X floatatom 603 461 5 0 0 0 - - -;
#X obj 592 513 line~;
#X obj 597 487 pack 0 100;
#N canvas 615 142 747 304 volume 0;
#X obj 149 101 *~;
#X floatatom 192 93 5 0 0 0 - - -;
#X floatatom 203 173 5 0 0 0 - - -;
#X obj 198 144 env~ 128;
#X floatatom 263 27 5 0 0 0 - distancel -;
#X floatatom 262 106 5 0 0 0 - - -;
#X obj 288 145 +;
#X floatatom 292 172 5 0 0 0 - - -;
#X floatatom 313 89 5 0 0 0 - ctrl -;
#X obj 195 56 expr 1/$f1;
#X obj 111 -20 inlet~;
#X obj 129 178 outlet~;
#X text 240 173 control;
#X floatatom 67 60 5 0 0 0 - - ctrl;
#X obj 62 31 env~ 128;
#X obj 331 113 +;
#X floatatom 363 110 5 0 0 0 - - -;
#X floatatom 329 135 5 0 0 0 - - -;
#X msg 424 88 11;
#X obj 448 54 loadbang;
#X obj 269 62 expr -8.6561702*log($f1)-11;
#X connect 0 0 3 0;
#X connect 0 0 11 0;
#X connect 1 0 0 1;
#X connect 3 0 2 0;
#X connect 4 0 9 0;
#X connect 4 0 20 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 8 0 15 0;
#X connect 9 0 1 0;
#X connect 10 0 0 0;
#X connect 10 0 14 0;
#X connect 14 0 13 0;
#X connect 15 0 17 0;
#X connect 16 0 15 1;
#X connect 17 0 6 1;
#X connect 18 0 16 0;
#X connect 19 0 18 0;
#X connect 20 0 5 0;
#X restore 612 603 pd volume l;
#X floatatom 546 429 5 0 0 0 - - distancel;
#X floatatom 554 477 5 0 0 0 - - delayl1;
#X obj 523 553 vd~ loop1 1;
#X obj 727 337 netreceive 50070;
#X obj 371 574 vsl 15 128 0 127 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 305 630 / 40;
#N canvas 0 29 683 697 carAngle 1;
#X obj 76 46 inlet;
#X obj 75 98 unpack \$1 \$2 \$3 \$4 \$5;
#X floatatom -17 132 5 0 0 0 - - -;
#X msg 311 221 0.01;
#X obj -41 237 +;
#X obj 274 223 *;
#X floatatom -79 273 5 0 0 0 - - -;
#X obj -41 311 expr atan( $f2 / $f1 ) * 180 / 3.14;
#X floatatom -70 361 5 0 0 0 - - -;
#X obj -34 455 *;
#X floatatom 189 377 5 0 0 0 - - -;
#X floatatom -88 495 5 0 0 0 - - -;
#X obj 278 440 expr $f1 < 0 && $f2 < 0;
#X floatatom 187 501 5 0 0 0 - - -;
#X obj 175 415 *;
#X obj 179 531 *;
#X obj 278 516 expr $f1 > 0 && $f2 < 0;
#X floatatom 199 616 5 0 0 0 - - -;
#X obj 191 669 *;
#X floatatom 285 396 5 0 0 0 - - -;
#X floatatom 293 480 5 0 0 0 - - -;
#X floatatom 294 553 5 0 0 0 - - -;
#X floatatom 11 444 5 0 0 0 - - -;
#X obj -8 403 expr ($f1 > 0 && $f2 > 0);
#X obj 273 356 expr ($f1 < 0 && $f2 > 0);
#X obj 284 170 expr ($f1 < 0.2 && $f1 > -0.2);
#X floatatom 187 457 5 0 0 0 - - -;
#X floatatom 184 558 5 0 0 0 - - -;
#X floatatom 236 671 5 0 0 0 - - -;
#X obj 153 348 expr 180 - abs($f1);
#X obj -34 652 outlet;
#X floatatom -74 619 5 0 0 0 - - -;
#X obj 246 593 expr 360 - abs($f1);
#X obj 172 476 expr 180 + abs($f1);
#X obj -28 594 expr 360 - ($f1 + $f2 + $f3 + $f4);
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 4 0;
#X connect 1 0 25 0;
#X connect 1 1 7 1;
#X connect 1 1 12 1;
#X connect 1 1 16 1;
#X connect 1 1 24 1;
#X connect 1 1 23 1;
#X connect 3 0 5 1;
#X connect 4 0 6 0;
#X connect 4 0 7 0;
#X connect 4 0 23 0;
#X connect 4 0 24 0;
#X connect 4 0 12 0;
#X connect 4 0 16 0;
#X connect 5 0 4 1;
#X connect 7 0 8 0;
#X connect 7 0 9 1;
#X connect 7 0 29 0;
#X connect 7 0 32 0;
#X connect 7 0 33 0;
#X connect 9 0 11 0;
#X connect 9 0 34 0;
#X connect 12 0 20 0;
#X connect 12 0 15 0;
#X connect 14 0 26 0;
#X connect 14 0 34 1;
#X connect 15 0 27 0;
#X connect 15 0 34 2;
#X connect 16 0 21 0;
#X connect 16 0 18 0;
#X connect 18 0 28 0;
#X connect 18 0 34 3;
#X connect 23 0 22 0;
#X connect 23 0 9 0;
#X connect 24 0 19 0;
#X connect 24 0 14 0;
#X connect 25 0 3 0;
#X connect 25 0 5 0;
#X connect 29 0 10 0;
#X connect 29 0 14 1;
#X connect 32 0 17 0;
#X connect 32 0 18 1;
#X connect 33 0 13 0;
#X connect 33 0 15 1;
#X connect 34 0 31 0;
#X connect 34 0 30 0;
#X restore 727 400 pd carAngle;
#X floatatom 730 453 5 0 0 0 - - -;
#X text 934 135 becomes ---------->;
#X text 793 16 comment;
#X text 635 59 Angle explained:;
#X text 741 61 Figure 1 y ^ | | | | (0 \, 0) <-viewer ------------>-------->
x | | * (10 \, -1) | ^--a car | Here: 270 < angle < 360 angle is the
angle between viewer and car \, if 0 < angle < 360;
#X text 1074 60 Figure 2 y ^ | | | 7 <--- viewer turns her head to
achieve | / same result --------------*-> x | ^--car | | | Here: 0
< angle' < 90 angle' = 360 - angle;
#X text 728 475 (Figure 2) Angle that the the viewer has to turn her
head if the car moved along the x axis \, in order to achieve the same
result. This is necessary because the result of the azimuth makes sense
only if the viewer turns her head. (e.g. sounds with 0 < azimuth <
90 have their source on the right of the viewer.);
#X text 960 265 final angle should be calculated by combining angle'
with the angle that the user has already turned her head. angle'' =
(angle' + angle_turned) % 360;
#X obj 147 129 delwrite~ loop1 7000;
#X floatatom 405 688 5 0 0 0 - - -;
#X msg 371 531 127;
#X obj 371 493 loadbang;
#X connect 0 0 38 0;
#X connect 1 0 14 0;
#X connect 1 1 15 0;
#X connect 2 0 4 0;
#X connect 3 0 1 1;
#X connect 4 0 3 0;
#X connect 5 0 7 0;
#X connect 6 0 1 2;
#X connect 7 0 6 0;
#X connect 12 0 2 0;
#X connect 13 0 5 0;
#X connect 14 0 8 0;
#X connect 15 0 8 1;
#X connect 16 0 18 0;
#X connect 16 0 23 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 19 0 21 0;
#X connect 19 0 24 0;
#X connect 20 0 25 0;
#X connect 21 0 20 0;
#X connect 22 0 1 0;
#X connect 25 0 22 0;
#X connect 26 0 17 0;
#X connect 26 0 29 0;
#X connect 27 0 28 0;
#X connect 27 0 39 0;
#X connect 28 0 15 1;
#X connect 28 0 14 1;
#X connect 29 0 30 0;
#X connect 30 0 12 0;
#X connect 40 0 27 0;
#X connect 41 0 40 0;
#X restore 717 390 pd carAngle;
#X floatatom 720 443 5 0 0 0 - - -;
#X connect 0 0 25 0;
#X connect 1 0 14 0;
#X connect 1 1 15 0;
#X connect 2 0 4 0;
#X connect 3 0 1 1;
#X connect 4 0 3 0;
#X connect 5 0 7 0;
#X connect 6 0 1 2;
#X connect 7 0 6 0;
#X connect 12 0 2 0;
#X connect 13 0 5 0;
#X connect 14 0 8 0;
#X connect 15 0 8 1;
#X connect 16 0 18 0;
#X connect 16 0 23 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 19 0 21 0;
#X connect 19 0 24 0;
#X connect 20 0 26 0;
#X connect 21 0 20 0;
#X connect 22 0 1 0;
#X connect 26 0 22 0;
#X connect 27 0 17 0;
#X connect 28 0 29 0;
#X connect 29 0 15 1;
#X connect 29 0 14 1;
